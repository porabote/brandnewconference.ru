import React from 'react'
import StripedDropLink from './striped-drop-link'

class StripedDropMenu extends React.Component {

    state = {
        isOpened: false
    }

    render() {

        let links = (Array.isArray(this.props.children)) ? [...this.props.children] : [this.props.children]

        return(
            <div
                className="striped-drop-menu"
                onMouseLeave={() => {
                    this.setState({isOpened: false})
                }}
            >
                <div
                    className="striped-drop-menu__list__toggle"
                    onClick={() => {
                        this.setState({isOpened: this.state.isOpened? false : true})
                    }}
                ></div>
                <div className={this.state.isOpened ? 'striped-drop-menu__list active' : 'striped-drop-menu__list'}>
                    {links.map((link, index) => {

                        if (typeof link == 'undefined') {
                            return;
                        }
                        // If it React.Fragment
                        if (typeof link.type == 'symbol') {
                            return link.props.children.map((lin, index) => {
                                return React.cloneElement(<StripedDropLink/>, {key: index, originalElement: lin, ...lin.props})
                            })
                        } else {
                            if (typeof link === "object") {
                                return React.cloneElement(<StripedDropLink/>, {key: index, originalElement: link})
                            }
                        }

                    })}
                </div>
            </div>
        )
    }
}

export default StripedDropMenu