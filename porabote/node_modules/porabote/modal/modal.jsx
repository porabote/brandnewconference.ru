import React, { Component } from 'react'
import { connect } from 'react-redux'
import ModalTab from './modal-tab'
import ModalItem from './modal-item'
import './modal.less'

class Modal extends React.Component {

    render() {

        let { items } = this.props.modal;

        return(
            <div
                className={this.props.modal.isOpen ? "modal active" : "modal"}
                onClick={() => {
                    this.props.closeModal()
                }}
            >
                <div
                    className={this.props.modal.isOpen ? "modal-box-wrap active" : "modal-box-wrap"}
                    onClick={e => {e.stopPropagation()}}
                >
                    <div id="modal-tabs">
                        {items.map((data, index) => {
                            return <ModalTab
                              data={data}
                              activeItemKey={this.props.modal.activeItemKey}
                              itemkey={index}
                              key={data.key}
                            />
                        })}
                    </div>

                    {items.map((data, index) => {
                        return <ModalItem
                          activeItemKey={this.props.modal.activeItemKey}
                          data={data}
                          itemkey={index}
                          key={data.key}
                        />
                    })}

                </div>
            </div>
        );
    }

}

const mapStateToProps = (state) => {
    return({
        modal: state.modal
    })
}

const mapDispatchToProps = (dispatch) => {
    return {
        closeModal: () => dispatch({
            type: 'CLOSE_MODAL'
        })
    }
}

export default connect(mapStateToProps, mapDispatchToProps)(Modal)